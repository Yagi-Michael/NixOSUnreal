{ pkgs, lib, utils }:

pkgs.writeScriptBin "refresh-env" ''
  #!${pkgs.stdenv.shell}
  ${lib.banners.colorTheWorld}
  clear
  print_base "â•”â•â•LARSğŸ‘‘ISğŸ‘‘LIFEâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
  print_base "â•‘ğŸ¸ğŸ‘‘ğŸ¸gUbGuuB NixOS Unreal Engine 5 Binary Dev EnvğŸ¸ğŸ‘‘ğŸ¸â•‘"
  print_base "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
  print_base "â•‘To run Unreal Engine:                                    â•‘"
  print_base "â•‘''${BYELLOW}  run-unreal''${NC} [optional_path] [args...]                   â•‘"
  print_base "â•‘   - Default path: ../Engine/Binaries/Linux/UnrealEditor â•‘"
  print_base "â•‘   - If you specify a path, it will be used instead      â•‘"
  print_base "â•‘''${BYELLOW}   - If you use Rider start Unreal from Rider!''${NC}           â•‘"
  print_base "â•‘                                                         â•‘"
  print_base "â•‘To run JetBrain Rider within the environment:            â•‘"
  print_base "â•‘''${BYELLOW}  run-rider''${NC} [args...]                                    â•‘"
  print_base "â•‘                                                         â•‘"
  print_base "â•‘To run Zed editor within the environment:               â•‘"
  print_base "â•‘''${BYELLOW}  run-zed''${NC} [args...]                                      â•‘"
  print_base "â•‘                                                         â•‘"
  print_base "â•‘To generate compile_commands.json for clangd:           â•‘"
  print_base "â•‘''${YELLOW}  gen-compile-commands''${NC} (run inside unreal-fhs)             â•‘"
  print_base "â•‘                                                         â•‘"
  print_base "â•‘To check if Vulkan work:                                 â•‘"
  print_base "â•‘''${YELLOW}  check-vulkan''${NC}                                           â•‘"
  print_base "â•‘                                                         â•‘"
  print_base "â•‘To learn about KDE Wayland mandatory settings:           â•‘"
  print_base "â•‘''${YELLOW}  kde-wayland-settings''${NC}                                   â•‘"
  print_base "â•‘                                                         â•‘"
  print_base "â•‘To kill orphaned Unreal Engine processes:                â•‘"
  print_base "â•‘''${YELLOW}  kill-unreal''${NC}                                            â•‘"
  print_base "â•‘                                                         â•‘"
  print_base "â•‘To enter the FHS shell (advanced):                       â•‘"
  print_base "â•‘''${YELLOW}  unreal-fhs''${NC}                                             â•‘"
  print_base "â•‘                                                         â•‘"
  print_base "â•‘To display this tooltips:                                â•‘"
  print_base "â•‘''${YELLOW}  refresh-env''${NC}                                            â•‘"
  print_base "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•LIVEğŸ¸LOVEğŸ¸LARSâ•â•â•"
  print_error "            !!! IMPORTANT SECURITY NOTICE FOR WAYLAND !!!                                "
  print_warning "- For keyboard input to work in Unreal Engine popups under KDE/Wayland,            "
  print_warning "- you need to disable an important and great Wayland security setting :(           "
  print_warning "- No workaround seem currently available that maintains Wayland's security model   "
  print_base ""
  print_base "Run ''${YELLOW}kde-wayland-settings''${NC} for more details."
''